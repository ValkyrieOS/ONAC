<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Miembros ONAC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap");

      body {
        font-family: "Poppins", sans-serif;
        background: #1e293b;
        color: #f3f4f6;
      }

      .card {
        position: relative;
        border-radius: 0.5rem;
        overflow: hidden;
        transition: transform 0.3s ease;
      }

      .card:hover {
        transform: translateY(-5px);
      }

      .member-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1rem;
      }

      .platform-icon {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 50%;
        padding: 0.25rem;
      }

      .rank-badge {
        position: absolute;
        top: 0.5rem;
        left: 0.5rem;
        padding: 0.25rem 0.5rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
      }

      .member-name {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 0.5rem;
        background: rgba(0, 0, 0, 0.7);
        text-align: center;
        font-weight: 600;
      }
    </style>
  </head>

  <body class="min-h-screen">
    <header class="bg-gray-800 text-white py-6 sticky top-0 z-10 shadow-lg">
      <div class="container mx-auto px-4">
          <div class="flex justify-between items-center">
              <h1 class="text-3xl font-bold text-onac-blue">ONAC</h1>
              <nav>
                  <ul class="flex space-x-6">
                      <li>
                          <a href="index.html"
                              class="hover:text-onac-blue transition-colors duration-200 text-lg">Inicio</a>
                      </li>
                      <li>
                          <a href="clans.html" class="hover:text-onac-blue transition-colors duration-200 text-lg">Clanes</a>
                      </li>
                      <li>
                          <a href="balance.html"
                              class="hover:text-onac-blue font-semibold transition-colors duration-200 text-lg">Balance</a>
                      </li>
                      <a href="pagos.html"
                      class="hover:text-onac-blue font-semibold transition-colors duration-200 text-lg">Pagos</a>
                      </li>
                      <li>
                        <a
                          href="#"
                          class="hover:text-onac-blue transition-colors duration-200 text-lg"
                          >Miembros</a
                        >
                      </li>
                  </ul>
              </nav>
          </div>
      </div>
  </header>

    <main class="container mx-auto px-4 py-8">
      <div id="membersList" class="member-list">
        <!-- Los miembros se insertarán aquí -->
      </div>
    </main>
    <script>
      const rankColors = {
        Owner: "bg-red-500",
        Developer: "bg-purple-500",
        Líder: "bg-yellow-500",
        Usuario: "bg-green-500",
      };

      const rankOrder = ["Owner", "Developer", "Líder", "Usuario"];

      async function fetchMembers() {
        try {
          const response = await fetch("data/members.json");
          if (!response.ok)
            throw new Error(`HTTP error! status: ${response.status}`);
          const data = await response.json();
          return data.members;
        } catch (error) {
          console.error("Error al cargar los miembros:", error);
          return [];
        }
      }

      function createMemberCard(member) {
        const card = document.createElement("div");
        card.className = `card`;

        const platformIcon =
          member.platform === "java" ? "fa-brands fa-java" : "fa-solid fa-cube";
        const ownerIcon = member.isOwner
          ? `<i class="fas fa-crown text-yellow-300 ml-1" aria-label="Propietario"></i>`
          : "";

        card.innerHTML = `
                <img src="${member.image}" alt="${
          member.name
        }" class="w-full h-48 object-cover">
                <div class="platform-icon">
                    <i class="${platformIcon} text-xl ${
          member.platform === "java" ? "text-orange-400" : "text-blue-400"
        }" aria-label="Plataforma: ${member.platform}"></i>
                </div>
                <span class="rank-badge ${rankColors[member.rank]}">${
          member.rank
        }</span>
                <div class="member-name">${member.name} ${ownerIcon}</div>
            `;

        return card;
      }

      function sortMembers(members) {
        return members.sort(
          (a, b) => rankOrder.indexOf(a.rank) - rankOrder.indexOf(b.rank)
        );
      }

      async function displayMembers() {
        const membersListContainer = document.getElementById("membersList");
        if (!membersListContainer) {
          console.error("No se encontró el contenedor de miembros");
          return;
        }

        const members = await fetchMembers();
        const sortedMembers = sortMembers(members);

        sortedMembers.forEach((member) => {
          const card = createMemberCard(member);
          membersListContainer.appendChild(card);
        });
      }

      document.addEventListener("DOMContentLoaded", displayMembers);
    </script>
  </body>
</html>
